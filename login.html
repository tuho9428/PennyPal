<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>PennyPal</title>
    <link href="./CSS/index.css" rel="stylesheet" />
    <link href="./CSS/login.css" rel="stylesheet" />
    <script src="script.js" defer></script>
  </head>

  <body>
    <header>
      <div class="top-container">
        <div class="logo-container">
          <img src="./images/logo.png" alt="Logo" />
          <h1>PennyPal</h1>
        </div>
      </div>

      <div class="nav-container">
        <nav>
          <ul>
            <li><a href="home.html">Home</a></li>
            <li><a href="about.html">About</a></li>
            <li><a href="contact.html">Contact</a></li>
            <li><a href="dashboard.php">User Dashboard</a></li>
            <li><a href="login.html">Login</a></li>
            <li><a href="register.html">Register</a></li>
          </ul>
        </nav>
      </div>
    </header>

    <div class="container mt-5">
      <h1 class="login">Login</h1>

      <div class="row">
        <div class="col-sm-8">
          <div class="card">
            <div class="card-body">
              <!-- Makes POST request to /login route -->
              <form action="php/login.php" method="POST">
                <div class="form-group">
                  <label for="email">Email</label>
                  <input type="email" class="form-control" name="username" />
                </div>
                <div class="form-group">
                  <label for="password">Password</label>
                  <input type="password" class="form-control" name="password" />
                </div>
                <div class="error-container">
                  <ul class="error-list"></ul>
                </div>
                <button type="submit" class="btn btn-dark">Login</button>
              </form>
            </div>
          </div>
        </div>
      </div>
    </div>

    <footer class="footer" id="sec-f268">
      <div class="footer-content">
        <div class="footer-info">
          <h3>About Us</h3>
          <p>
            Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla
            mauris lorem, dignissim ut odio vitae, vehicula ultrices nisi.
          </p>
        </div>
        <div class="footer-links">
          <h3>Quick Links</h3>
          <ul>
            <li><a href="home.html">Home</a></li>
            <li><a href="about.html">About</a></li>
            <li><a href="contact.html">Contact</a></li>
          </ul>
        </div>
        <div class="footer-contact">
          <h3>Contact Us</h3>
          <p>Email: info@example.com</p>
          <p>Phone: +1 123 456 789</p>
        </div>
      </div>
      <div class="footer-bottom">
        <p class="small-text">
          Copyright &copy; 2024 PennyPal. All rights reserved.
        </p>
      </div>
    </footer>

    <script src="script.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        const form = document.querySelector("form");

        form.addEventListener("submit", function (event) {
          event.preventDefault(); // Prevent form submission

          // Get form inputs
          const emailInput = document.querySelector('input[name="username"]');
          const passwordInput = document.querySelector(
            'input[name="password"]'
          );

          // Regular expressions for email and password formats
          const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
          const passwordRegex =
            /^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])[0-9a-zA-Z]{8,}$/;

          // Error messages
          const errors = {};

          // Validate email format
          if (!emailRegex.test(emailInput.value)) {
            errors.email = "Please enter a valid email address";
          }

          // Validate password format
          if (!passwordRegex.test(passwordInput.value)) {
            errors.password =
              "Password must contain at least 8 characters, including one uppercase letter, one lowercase letter, and one number";
          }

          // Display error messages
          const errorList = document.querySelector(".error-list");
          errorList.innerHTML = ""; // Clear previous errors

          if (Object.keys(errors).length > 0) {
            Object.values(errors).forEach((message) => {
              const li = document.createElement("li");
              li.textContent = message;
              errorList.appendChild(li);
            });
          } else {
            form.submit(); // Submit the form if no errors
          }
        });
      });
    </script>
  </body>
</html>
